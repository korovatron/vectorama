<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-H5MT68XJY3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-H5MT68XJY3');
    </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#1A2F42">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="Vectorama is a clean, intuitive way to explore vectors, lines, planes, and matrix transformations in 2D and 3D. Animate transformations, uncover eigenvalues and eigenvectors, and see eigenspaces drawn right in front of you. Plot geometric objects, find intersections, measure angles, and compute distances — including minimum distances between skew lines or parallel planes. Switch between arrow-style or point-style vectors depending on what you're explaining. Built to help students and teachers make the abstract visible.">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.korovatron.co.uk/vectorama/">
    <meta property="og:title" content="Vectorama | Good news, everyone!">
    <meta property="og:description" content="A clean, intuitive way to explore vectors, lines, planes, and matrix transformations in 2D and 3D. Make the abstract visible.">
    <meta property="og:image" content="https://www.korovatron.co.uk/vectorama/images/preview.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:type" content="image/png">
    <meta property="og:image:alt" content="Vectorama - Interactive vector mathematics visualization">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.korovatron.co.uk/vectorama/">
    <meta property="twitter:title" content="Vectorama | Good news, everyone!">
    <meta property="twitter:description" content="A clean, intuitive way to explore vectors, lines, planes, and matrix transformations in 2D and 3D. Make the abstract visible.">
    <meta property="twitter:image" content="https://www.korovatron.co.uk/vectorama/images/preview.png">
    
    <title>Vectorama | Good news, everyone!</title>
    <link rel="icon" type="image/png" href="images/icon-192.png">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="images/icon-180.png">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Title Screen -->
    <div id="title-screen" class="title-screen">
        <div class="title-content">
            <img src="images/vectoramaLogo.png" alt="Vectorama Logo" class="title-logo" draggable="false">
            <p class="title-tagline">Good news everyone! Vectors!</p>
            <button id="start-btn" class="start-btn">Start</button>
            <p class="copyright">© 2026 Neil Kendall<span class="break-mobile"><br></span><span class="space-desktop"> | </span><span class="more-contact-group"><span class="projects-text">More @ </span><a href="https://www.korovatron.co.uk/" target="_blank">www.korovatron.co.uk</a><span class="space-inline"> | </span><a href="mailto:unimatrix@korovatron.co.uk" class="contact-icon-link" aria-label="Contact Me"><svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M3 6.75A2.75 2.75 0 0 1 5.75 4h12.5A2.75 2.75 0 0 1 21 6.75v10.5A2.75 2.75 0 0 1 18.25 20H5.75A2.75 2.75 0 0 1 3 17.25V6.75Zm2.07-.25 6.93 5.47 6.93-5.47H5.07Zm13.43 1.93-5.73 4.53a1.25 1.25 0 0 1-1.54 0L5.5 8.43v8.82c0 .14.11.25.25.25h12.5a.25.25 0 0 0 .25-.25V8.43Z"/></svg></a></span></p>
        </div>
    </div>
    
    <!-- Main App Container (hidden until Start is clicked) -->
    <div id="main-app" class="main-app" style="display: none;">
    <!-- Hamburger Menu Button -->
    <button id="panel-toggle-btn" class="panel-toggle-btn active">
        <span></span>
        <span></span>
        <span></span>
    </button>
    
    <div class="container">
        <!-- Control Panel -->
        <div class="control-panel">
            <img src="images/panelLogo.png" alt="Vectorama" class="panel-logo" draggable="false">
            
            <!-- Top Button Row -->
            <div class="top-button-row">
                <!-- Add Button with Dropdown -->
                <button id="add-btn" class="add-button" title="Add object">
                    <svg class="add-plus-icon" width="12" height="12" viewBox="0 0 12 12" fill="none" aria-hidden="true">
                        <line x1="6" y1="1.8" x2="6" y2="10.2" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"></line>
                        <line x1="1.8" y1="6" x2="10.2" y2="6" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"></line>
                    </svg>
                    Add
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="2" style="margin-left: 4px;" aria-hidden="true">
                        <polyline points="2,4 6,8 10,4"></polyline>
                    </svg>
                </button>
                
                <!-- Add Dropdown Menu (hidden by default) -->
                <div id="add-dropdown" class="add-dropdown" style="display: none;">
                    <div class="dropdown-item" data-action="add-vector">
                        <strong>+</strong> Add Vector
                    </div>
                    <div class="dropdown-item" data-action="add-matrix">
                        <strong>+</strong> Add Matrix
                    </div>
                    <div class="dropdown-item" data-action="add-line">
                        <strong>+</strong> Add Line
                    </div>
                    <div class="dropdown-item action-3d" data-action="add-plane">
                        <strong>+</strong> Add Plane
                    </div>
                    <div class="dropdown-separator"></div>
                    <div class="dropdown-header">Transformations</div>
                    <div class="dropdown-item" data-action="rotation-45">
                        Rotation 45°
                    </div>
                    <div class="dropdown-item" data-action="rotation-90">
                        Rotation 90°
                    </div>
                    <div class="dropdown-item" data-action="scale-2x">
                        Scale 2×
                    </div>
                    <div class="dropdown-item" data-action="shear-x">
                        Shear X
                    </div>
                    <div class="dropdown-item" data-action="reflection-x">
                        Reflection X
                    </div>
                    <div class="dropdown-item" data-action="reflection-y">
                        Reflection Y
                    </div>
                    <div class="dropdown-separator"></div>
                    <div class="dropdown-header">Vector Presets</div>
                    <!-- 2D Presets -->
                    <div class="dropdown-item preset-2d" data-action="preset-square">
                        Unit Square
                    </div>
                    <div class="dropdown-item preset-2d" data-action="preset-triangle">
                        Triangle
                    </div>
                    <div class="dropdown-item preset-2d" data-action="preset-pentagon">
                        Pentagon
                    </div>
                    <div class="dropdown-item preset-2d" data-action="preset-star">
                        Star
                    </div>
                    <div class="dropdown-item preset-2d" data-action="preset-circle">
                        Circle
                    </div>
                    <!-- 3D Presets -->
                    <div class="dropdown-item preset-3d" data-action="preset-cube" style="display: none;">
                        Unit Cube
                    </div>
                    <div class="dropdown-item preset-3d" data-action="preset-tetrahedron" style="display: none;">
                        Tetrahedron
                    </div>
                    <div class="dropdown-item preset-3d" data-action="preset-octahedron" style="display: none;">
                        Octahedron
                    </div>
                    <div class="dropdown-item preset-3d" data-action="preset-sphere" style="display: none;">
                        Sphere
                    </div>
                </div>
                
                <button id="reset-axes-btn" class="top-btn" title="Reset View">
                    RESET<br>AXES
                </button>

                <button id="dimension-toggle-btn" class="top-btn" title="Toggle 2D/3D">
                    <span class="dim-option dim-active" id="dim-2d">2D</span>
                    <span class="dim-separator">|</span>
                    <span class="dim-option" id="dim-3d">3D</span>
                </button>
            </div>
            
            <!-- Second Button Row -->
            <div class="top-button-row">
                <button id="intersection-toggle-btn" class="top-btn" title="Toggle Intersections">
                    <div style="display: flex; align-items: center; justify-content: center; width: 100%;">
                        <svg class="intersection-icon" id="intersection-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="14.8" y1="0.2" x2="3.2" y2="21.0" />
                            <line x1="9.2" y1="0.2" x2="20.8" y2="21.0" />
                            <line x1="1.2" y1="16" x2="22.8" y2="16" />
                            <circle cx="12" cy="5" r="2.2" fill="currentColor" stroke="none" />
                            <circle cx="6" cy="16" r="2.2" fill="currentColor" stroke="none" />
                            <circle cx="18" cy="16" r="2.2" fill="currentColor" stroke="none" />
                        </svg>
                    </div>
                </button>

                <button id="grid-toggle-btn" class="top-btn" title="Toggle Grid + Axis Labels">
                    <div style="display: flex; align-items: center; justify-content: center;">
                        <svg class="grid-icon" id="grid-icon" width="20" height="20" viewBox="0 0 24 24">
                            <rect x="3" y="3" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" />
                            <line x1="9" y1="3" x2="9" y2="21" stroke="currentColor" stroke-width="1.5" />
                            <line x1="15" y1="3" x2="15" y2="21" stroke="currentColor" stroke-width="1.5" />
                            <line x1="3" y1="9" x2="21" y2="9" stroke="currentColor" stroke-width="1.5" />
                            <line x1="3" y1="15" x2="21" y2="15" stroke="currentColor" stroke-width="1.5" />
                        </svg>
                    </div>
                </button>

                <button id="vector-display-toggle-btn" class="top-btn" title="Cycle Vector Display Mode">
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <svg class="vec-icon" id="vec-arrow" width="20" height="20" viewBox="0 0 16 16">
                            <defs>
                                <marker id="arrowhead" markerWidth="4" markerHeight="4" refX="3" refY="2" orient="auto">
                                    <polygon points="0 0, 4 2, 0 4" fill="currentColor" />
                                </marker>
                            </defs>
                            <line x1="2" y1="8" x2="12" y2="8" stroke="currentColor" stroke-width="1.5" marker-end="url(#arrowhead)" />
                        </svg>
                        <span class="vec-separator">|</span>
                        <svg class="vec-icon vec-active" id="vec-point" width="20" height="20" viewBox="0 0 16 16">
                            <circle cx="8" cy="8" r="3" fill="currentColor" />
                        </svg>
                    </div>
                </button>
            </div>
            
            <!-- Separator -->
            <div class="panel-separator"></div>

            <!-- Objects List (unified: matrices, planes, lines, vectors) -->
            <div id="objects-container">
                <!-- All objects (matrices, planes, lines, vectors) will be added here dynamically -->
            </div>

            <!-- Bottom controls under objects -->
            <div class="panel-separator"></div>
            <div class="top-button-row bottom-controls-row">
                <div class="bottom-half-buttons">
                    <button id="return-to-title" class="top-btn bottom-half-btn" title="Return to Title Screen">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                            <polyline points="9 22 9 12 15 12 15 22"></polyline>
                        </svg>
                    </button>
                    <button id="help-button" class="top-btn bottom-half-btn" title="How to Use">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                        </svg>
                    </button>
                </div>
                <button id="vector-size-toggle-btn" class="top-btn" title="Toggle display scale (small/large)">
                    <div style="display: flex; align-items: center; gap: 6px;">
                        <span class="size-option size-active" id="size-small" style="font-size: 11px;">A</span>
                        <span class="size-separator">|</span>
                        <span class="size-option" id="size-large" style="font-size: 16px;">A</span>
                    </div>
                </button>
                <button id="theme-toggle" class="top-btn" title="Toggle Theme">
                    <div style="display: flex; align-items: center; gap: 6px;">
                        <svg id="light-icon" class="theme-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                        <span class="theme-separator">|</span>
                        <svg id="dark-icon" class="theme-icon theme-active" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </div>
                </button>
            </div>
            
            <!-- Transform Mode Content -->
            <div id="transform-mode-content" class="mode-content">
            </div>
        </div>

        <!-- 3D Canvas -->
        <div class="canvas-container">
            <canvas id="three-canvas"></canvas>

            <div id="plane-extent-control" class="plane-extent-control" style="display: none;">
                <div class="plane-extent-label-row">
                    <span>Plane Size</span>
                    <span id="plane-extent-value">10</span>
                </div>
                <input id="plane-extent-slider" type="range" min="5" max="100" step="1" value="10" aria-label="Plane size">
            </div>
            
            <!-- Eigenvalue Info Panel (bottom-right) -->
            <div id="eigenvalue-panel" class="eigenvalue-panel" style="display: none;">
                <div class="eigenvalue-content">
                    <div class="eigenvalue-row eigenvalue-header">
                        <span>Eigenvalues</span>
                        <button id="close-eigenvalue-panel-btn" class="info-panel-close-btn" aria-label="Close matrix info panel">×</button>
                    </div>
                    <div id="eigenvalue-values" class="eigenvalue-values"></div>
                </div>
            </div>

            <!-- Vector Info Panel (bottom-right) -->
            <div id="vector-info-panel" class="eigenvalue-panel" style="display: none;">
                <div class="eigenvalue-content">
                    <div class="eigenvalue-row eigenvalue-header">
                        <span id="vector-info-header">Vector Information</span>
                        <button id="close-vector-info-panel-btn" class="info-panel-close-btn" aria-label="Close vector info panel">×</button>
                    </div>
                    <div id="vector-info-content" class="eigenvalue-values"></div>
                </div>
            </div>
            
            <!-- Line Info Panel (bottom-right) -->
            <div id="line-info-panel" class="eigenvalue-panel" style="display: none;">
                <div class="eigenvalue-content">
                    <div class="eigenvalue-row eigenvalue-header">
                        <span id="line-info-header">Line Information</span>
                        <button id="close-line-info-panel-btn" class="info-panel-close-btn" aria-label="Close line info panel">×</button>
                    </div>
                    <div id="line-info-content" class="eigenvalue-values"></div>
                </div>
            </div>
            
            <!-- Plane Info Panel (bottom-right) -->
            <div id="plane-info-panel" class="eigenvalue-panel" style="display: none;">
                <div class="eigenvalue-content">
                    <div class="eigenvalue-row eigenvalue-header">
                        <span id="plane-info-header">Plane Information</span>
                        <button id="close-plane-info-panel-btn" class="info-panel-close-btn" aria-label="Close plane info panel">×</button>
                    </div>
                    <div id="plane-info-content" class="eigenvalue-values"></div>
                </div>
            </div>
        </div>
    </div>

    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
        }
    }
    </script>
    </div><!-- End Main App Container -->

    <div id="shortcuts-overlay" class="shortcuts-overlay">
        <div class="shortcuts-content">
            <div class="shortcuts-header">
                <h2>How to Use Vectorama</h2>
                <a href="https://www.youtube.com/watch?v=wbsMhNXIuHQ&list=PL3qUa0OyFq5VcVRntLC41CSZZMUalKisd" target="_blank" rel="noopener noreferrer" aria-label="Watch Vectorama videos on YouTube">
                    <img src="images/yt_icon_white_digital.png" alt="YouTube" class="shortcuts-youtube-logo" draggable="false">
                </a>
            </div>

            <div class="shortcuts-section">
                <h3>Getting Started</h3>
                <div class="shortcut-item">
                    <span class="shortcut-description">Use <strong>Add</strong> to insert vectors, lines, planes, and matrices.</span>
                </div>
            </div>

            <div class="shortcuts-section">
                <h3>Navigation</h3>
                <div class="shortcut-item desktop-only">
                    <span class="shortcut-description">Pan/rotate/zoom with mouse and wheel.</span>
                </div>
                <div class="shortcut-item touch-only">
                    <span class="shortcut-description">Pan with one finger and zoom with pinch.</span>
                </div>
                <div class="shortcut-item keyboard-only">
                    <span class="shortcut-description">Use <strong>+</strong> / <strong>-</strong> keyboard keys for zoom.</span>
                </div>
                <div class="shortcut-item keyboard-only">
                    <span class="shortcut-description">Use arrow keys to pan the camera.</span>
                </div>
            </div>

            <div class="shortcuts-section">
                <h3>Objects & Analysis</h3>
                <div class="shortcut-item">
                    <span class="shortcut-description">Lines and planes support multiple equation forms (e.g. Cartesian, vector, scalar/dot). Use each row’s form toggle button to switch formats.</span>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-description">Use the <strong>i</strong> buttons for angles and distances.</span>
                </div>
            </div>

            <div class="shortcuts-section">
                <h3>Matrices</h3>
                <div class="shortcut-item">
                    <span class="shortcut-description">Select or edit a matrix, then press the play button to apply it to all objects.</span>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-description">Use the <strong>i</strong> button to inspect eigenvalues and eigenspaces.</span>
                </div>
            </div>

            <div class="shortcuts-close">Version <span id="app-version-label"></span></div>
        </div>
    </div>
    
    <script type="module" src="app.js"></script>
    <script>
        // Register Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/service-worker.js')
                .then((registration) => {
                    console.log('Service Worker registered successfully:', registration.scope);
                })
                .catch((error) => {
                    console.log('Service Worker registration failed:', error);
                });
        }
    </script>
</body>
</html>
